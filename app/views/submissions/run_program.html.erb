<% content_for :title, "Test Case Run" %>

<header>
  <h1>Output Compared to Expected Output</h1>
</header>

<table class="output-compare">
  <tr>
    <th>Output</th>
    <th>Expected Output</th>
  </tr>
  <% Dir.glob(@tempDirectory  + 'output_*') do |file| %>
    <tr>
      <td><%= data = File.read(file) %></td>
      <% cmpName = file.gsub! @tempDirectory, "" %>
      <% test = @submission.assignment.test_case.upload_data.select { |out| out.name == cmpName } %>
      <td><%= data2 = test.first.contents %></td>
    </tr>
  <% end %>
</table>

<% FileUtils.rm_rf(@tempDirectory) %>
