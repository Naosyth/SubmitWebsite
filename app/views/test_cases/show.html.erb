<% content_for :title, get_assignment.name + " Test Case" %>

<header>
  <h1><%= get_assignment.name %> Test Case</h1>
</header>

<div class="content-group">
  <table class="files-display">
    <tr>
      <th>File Name</th>
      <th>Updated At</th>
      <th>Uploaded At</th>
      <th>File Type</th>
    </tr>

    <% @test_case.upload_data.each do |upload_data| %>
      <tr>
        <td><%= link_to upload_data.name, upload_datum_path(upload_data) %></td>
        <td><%= upload_data.updated_at %></td>
        <td><%= upload_data.created_at %></td>
        <td><%= upload_data.file_type %></td>
        <td><%= link_to 'Edit', edit_upload_datum_path(upload_data) %></td>
        <td><%= button_to 'Delete', upload_data, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </table>
  <br>
  <%= form_tag create_file_url("test_case", @test_case), method: :post, :multipart => true do %>
  	<%= file_field_tag 'upload_file' %>
  	<%= submit_tag "Save File" %>
  <% end %>
  <%= link_to "Create Outputs", :method => :get, :action => :create_output %>
</div>

<header>
  <h1>Test Case Running Variables</h1>
</header>

<div class="content-group">
  <%= form_for @test_case, url: test_case_url(@test_case), method: :patch do |f| %>
    <table>
      <tr>
        <td><%= f.label "CPU Max Run Time" %></td>
        <td><%= f.number_field :cpu_time, :step => 1 %></td>
      </tr>
      <tr>
        <td><%= f.label "Max Core Dump Size" %></td>
        <td><%= f.number_field :core_size, :step => 1 %></td>
      </tr>
      <tr>
        <% if @test_case.make.nil? %>
          <td><%= link_to "Add Makefile", new_make_url(@test_case) %></td>
        <% else %>
          <td><%= link_to @test_case.make.name, make_url(@test_case.make) %></td>
          <td><%= link_to 'Delete', make_url(@test_case.make), method: :delete, data: { confirm: 'Are you sure?' } %></td>
        <% end %>
      </tr>
      <tr>
        <td><%= f.submit "Save" %></td>
      </tr>
    </table>
  <% end %>
</div>

<header>
  <h1>Test Case Run Methods</h1>
</header>

<div class="content-group">
  <% @test_case.run_methods.each do |r| %>
    <%= link_to r.name, run_method_url(r) %>
    <% r.inputs.each do |i| %>
      <%= i.name %>
    <% end %>
  <% end %>
  <%= link_to "Add Run Method", new_run_method_url(@test_case) %>
</div>
